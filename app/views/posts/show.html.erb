<% if @post.repost.present? %>
  <%= link_to @post.user.name, user_post_path(@post.user) %>
  |
  <%= link_to 'Follow', follow_user_path(@post.user), method: :post %>
  shared from
  <%= link_to @post.repost.user.name, user_post_path(@post.user) %>
  <br>
  <% @post.repost.file_post.each do |f| %>
    <%= image_tag(f.url, width: "350", height: "250") %>
  <% end %>
  <br>
  <%= @post.repost.caption %>
  <hr>
<% else %>
  <%= link_to @post.user.name, user_post_path(@post.user) %>
  |
  <%= link_to 'Follow', follow_user_path(@post.user), method: :post %>
  <br>
  <% @post.file_post.each do |f| %>
    <%= image_tag(f.url, width: "350", height: "250") %>
  <% end %>
  <br>
  <%= @post.caption %>
  <hr>
<% end %>
<% if user_signed_in? %>
  <%= form_for @comment, url: post_comments_path(@post.id) do |f| %>
    <%= f.label :comment %>
    <%= f.text_area :comment %>
    <br>
    <%= f.submit 'Submit' %>
  <% end %>
<% end %>
<% if @post.comments.present? %>
  <h4>Komentar</h4>
  <% @post.comments.each do |comment| %>
    <% if comment.reply_id.present? == false %>
      Name: <%= comment.user.name %>
      <br>
      Comment: <%= comment.comment %>
      <br>
      <%= form_for @comment, url: reply_post_comment_path(@post, comment) do |f| %>
        <%= f.text_area :comment %>
        <br>
        <%= f.submit 'Reply' %>
      <% end %>
      <br>
      <% if comment.replies.present? %>
        replies: <br>
        <% comment.replies.each do |reply| %>
          Name: <%= reply.user.name %>
          <br>
          Comment: <%= reply.comment %>
          <br>
        <% end %>
      <% end %>
      ======
      <br>
    <% end %>
  <% end %>
<% end %>
<br>
